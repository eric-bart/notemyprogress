define(["local_fliplearning/axios","local_fliplearning/alertify"],function(e,n){return{template:'\n                <v-main mt-10>\n                    <v-row>\n                        <v-col sm="12">\n                            <v-dialog\n                                v-model="dialog"\n                                width="800"\n                                @click:outside="closeDialog()"\n                                @keydown.esc="closeDialog()"\n                            >\n                                <v-card>\n                                    <v-toolbar color="#118AB2" dark>\n                                        <span v-text="emailform_title"></span>\n                                        <v-spacer></v-spacer>\n                                        <v-btn icon @click="reset">\n                                            <v-icon v-text="close_icon"></v-icon>\n                                        </v-btn>\n                                    </v-toolbar>\n        \n                                    <v-container>\n                                        <v-row>\n                                            <v-col cols="12" sm="12">\n    \n                                                <v-chip class="ma-2" color="#118AB2" label dark>\n                                                    <span v-text="recipients"></span>\n                                                </v-chip>\n    \n                                                <template v-for="(user, index, key) in selected_users">\n                                                    <v-chip class="ma-2">\n                                                        <v-avatar left>\n                                                            <img :src="get_picture_url(user.id)">\n                                                        </v-avatar>\n                                                        <span>{{user.firstname}} {{user.lastname}}</span>\n                                                    </v-chip>\n                                                </template>\n    \n                                            </v-col>\n                                        </v-row>\n    \n                                        <v-row>\n                                            <v-col cols="12" sm="12">\n                                                <v-form ref="form" v-model="valid_form">\n                                                    <v-text-field\n                                                            v-model="strings.subject"\n                                                            :label="subject_label"\n                                                            :rules="subject_rules"\n                                                            required\n                                                            solo\n                                                    ></v-text-field>\n    \n                                                    <v-textarea\n                                                            v-model="message"\n                                                            :label="message_label"\n                                                            :rules="message_rules"\n                                                            required\n                                                            solo\n                                                    ></v-textarea>\n    \n                                                    <v-btn @click="submit" :disabled="!valid_form">\n                                                        <span v-text="submit_button"></span>\n                                                    </v-btn>\n    \n                                                    <v-btn @click="reset">\n                                                        <span v-text="cancel_button"></span>\n                                                    </v-btn>\n    \n                                                    <v-spacer></v-spacer>\n    \n                                                </v-form>\n                                            </v-col>\n                                        </v-row>\n                                    </v-container>\n        \n                                </v-card>\n                            </v-dialog>\n                        </v-col>\n                    </v-row>\n                    \n                    <v-row>\n                        <v-col sm="12">\n                            <div class="text-center">\n                                <v-dialog\n                                        v-model="loader_dialog"\n                                        persistent\n                                        width="300"\n                                >\n                                    <v-card color="#118AB2" dark>\n                                        <v-card-text>\n                                            <span v-text="sending_text"></span>\n                                            <v-progress-linear\n                                                    indeterminate\n                                                    color="white"\n                                                    class="mb-0"\n                                            ></v-progress-linear>\n                                        </v-card-text>\n                                    </v-card>\n                                </v-dialog>\n                            </div>\n                        </v-col>\n                    </v-row>\n               </v-main>\n                ',props:["dialog","selected_users","strings","moduleid","modulename","courseid","userid"],data(){return{close_icon:"mdi-minus",valid_form:!0,subject_label:this.strings.subject_label,subject_rules:[e=>!!e||this.strings.validation_subject_text],message:"",message_label:this.strings.message_label,message_rules:[e=>!!e||this.strings.validation_message_text],submit_button:this.strings.submit_button,cancel_button:this.strings.cancel_button,emailform_title:this.strings.emailform_title,sending_text:this.strings.sending_text,recipients:this.strings.recipients_label,loader_dialog:!1,mailsended_text:this.strings.mailsended_text}},methods:{get_picture_url:e=>`${M.cfg.wwwroot}/user/pix.php?file=/${e}/f1.jpg`,submit(){console.log(this.modulename);let t="";this.selected_users.forEach(e=>{t=t.concat(e.id,",")}),this.loader_dialog=!0,this.errors=[];let s={action:"sendmail",subject:this.strings.subject,recipients:t,text:this.message,userid:this.userid,courseid:this.courseid,moduleid:this.moduleid,modulename:this.modulename,scriptname:this.strings.scriptname,currentUrl:window.location.href};e({method:"get",url:M.cfg.wwwroot+"/local/fliplearning/ajax.php",params:s}).then(e=>{200==e.status&&e.data.ok?(this.$emit("update_dialog",!1),this.$refs.form.reset(),n.success(this.mailsended_text)):(n.error(this.strings.api_error_network),this.loader_dialog=!1)}).catch(e=>{n.error(this.strings.api_error_network)}).finally(()=>{this.loader_dialog=!1})},reset(){this.$emit("update_dialog",!1),this.$refs.form.resetValidation()},closeDialog(){this.$emit("update_dialog",!1)}}}});
//# sourceMappingURL=emailform.min.js.map

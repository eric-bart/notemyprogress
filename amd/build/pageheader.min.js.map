{"version":3,"sources":["../src/pageheader.js"],"names":["define","Axios","template","props","data","dialog","selectedgroup","mounted","set_selected_group","methods","update_group","action","courseid","userid","groupid","method","url","M","cfg","wwwroot","params","then","location","reload","catch","confirm","usegroupselector","use","groups","length","forEach","group","selected"],"mappings":"AAAAA,OAAM,iCAAC,CAAC,0BAAD,CAAD,CAA+B,SAAUC,CAAV,CAAgB,CAwGjD,MAvGmB,CACfC,QAAQ,itFADO,CAiDfC,KAAK,CAAC,CAAC,WAAD,CAAa,WAAb,CAAyB,cAAzB,CAAwC,YAAxC,CAAqD,QAArD,CAA+D,UAA/D,CAA0E,QAA1E,CAjDS,CAkDfC,IAlDe,gBAkDT,CACF,MAAM,CACFC,MAAM,GADJ,CAEFC,aAAa,CAAG,IAFd,CAIT,CAvDc,CAwDfC,OAxDe,mBAwDN,CACL,KAAKC,kBAAL,EACH,CA1Dc,CA2DfC,OAAO,CAAG,CACNC,YADM,wBACQ,CACV,GAAIN,CAAAA,CAAI,CAAG,CACPO,MAAM,CAAG,aADF,CAEPC,QAAQ,CAAG,KAAKA,QAFT,CAGPC,MAAM,CAAG,KAAKA,MAHP,CAIPC,OAAO,CAAG,KAAKR,aAJR,CAAX,CAMAL,CAAK,CAAC,CACFc,MAAM,CAAC,KADL,CAEFC,GAAG,CAAEC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,8BAFnB,CAGFC,MAAM,CAAGhB,CAHP,CAAD,CAAL,CAIGiB,IAJH,CAIQ,UAAc,CAClBC,QAAQ,CAACC,MAAT,EACH,CAND,EAMGC,KANH,CAMS,UAAO,CACZ,GAAGC,OAAO,CAAC,wEAAD,CAAV,CAAqF,CACjFH,QAAQ,CAACC,MAAT,EACH,CAFD,IAEK,CACDD,QAAQ,CAACC,MAAT,EACH,CACJ,CAZD,CAaH,CArBK,CAuBNG,gBAvBM,4BAuBY,CACd,GAAIC,CAAAA,CAAG,CAAG,KAAKC,MAAL,EAAoC,CAArB,MAAKA,MAAL,CAAYC,MAArC,CACA,MAAOF,CAAAA,CACV,CA1BK,CA4BNnB,kBA5BM,8BA4Bc,YAChB,GAAG,CAAC,KAAKkB,gBAAL,EAAJ,CAA6B,CACzB,MAAO,KACV,CACD,KAAKE,MAAL,CAAYE,OAAZ,CAAoB,SAAAC,CAAK,CAAI,CACzB,GAAGA,CAAK,CAACC,QAAT,CAAkB,CACd,CAAI,CAAC1B,aAAL,CAAqByB,CACxB,CACJ,CAJD,EAKA,GAAG,CAAC,KAAKzB,aAAN,EAAiD,WAA1B,QAAO,MAAKsB,MAAL,CAAY,CAAZ,CAAjC,CAAgE,CAC5D,KAAKA,MAAL,CAAY,CAAZ,EAAeI,QAAf,IACA,KAAK1B,aAAL,CAAqB,KAAKsB,MAAL,CAAY,CAAZ,CACxB,CACJ,CAzCK,CA3DK,CAwGtB,CAzGK,CAAN","sourcesContent":["define(['local_fliplearning/axios'], function (Axios){\r\n    const pageheader = {\r\n        template:`\r\n            <v-layout class=\"font-weight-bold fliplearning-page-title justify-space-between align-center\" id=\"page-header\">\r\n                <v-flex class=\"d-flex pa-4\">\r\n                    <span v-text=\"pagetitle\"></span>\r\n                </v-flex>\r\n            \r\n                <v-flex id=\"fml-group-selector\">\r\n                    <v-select\r\n                            attach \r\n                            v-model=\"selectedgroup\" \r\n                            v-if=\"usegroupselector()\" \r\n                            prepend-icon=\"group\" \r\n                            @change=\"update_group()\"\r\n                            :items=\"groups\" \r\n                            item-text=\"name\" \r\n                            item-value=\"id\">\r\n                    </v-select>\r\n                </v-flex>\r\n            \r\n                <v-flex \r\n                            class=\"d-flex justify-end align-center flex-grow-0 fliplearning-help-button pa-4 ml-8\" \r\n                            @click=\"dialog = !dialog\">\r\n                    <span class=\"mr-2 caption\" v-text=\"helptitle\"></span>\r\n                    <v-icon :color=\"'#ffffff'\">help_outline</v-icon>\r\n                </v-flex>\r\n            \r\n                <v-dialog v-model=\"dialog\" width=\"500\" class=\"help-dialog\">\r\n                    <v-card>\r\n                        <v-card-title class=\"headline lighten-2 d-flex justify-center help-dialog-title\">\r\n                            <span v-text=\"helptitle\" class=\"help-modal-title mr-2\"></span><v-icon color=\"white\">help_outline</v-icon>\r\n                        </v-card-title>\r\n                        <v-card-text class=\"pt-4 pb-4 pr-8 pl-8 help-dialog-content\">\r\n                            <template v-for=\"(help, index, key) in helpcontents\">\r\n                                <v-layout class=\"mb-2\" :key=\"key\" column>\r\n                                    <v-flex class=\"d-flex justify-center\">\r\n                                        <span class=\"fliplearning-sub-title mb-2\" v-html=\"help.title\"></span>\r\n                                    </v-flex>\r\n                                    <p v-html=\"help.description\" class=\"text-justify\"></p>\r\n                                </v-layout>\r\n                            </template>\r\n                        </v-card-text>\r\n                        <v-divider class=\"ma-0\"></v-divider>\r\n                        <v-card-actions class=\"d-flex justify-center help-dialog-footer\">\r\n                            <v-btn text @click=\"dialog = false\" v-text=\"exitbutton\" class=\"ma-0 fml-btn-secondary\"></v-btn>\r\n                        </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n            </v-layout>`,\r\n        props:['pagetitle','helptitle','helpcontents','exitbutton','groups', 'courseid','userid'],\r\n        data(){\r\n            return{\r\n                dialog : false,\r\n                selectedgroup : null,\r\n            }\r\n        },\r\n        mounted(){\r\n            this.set_selected_group();\r\n        },\r\n        methods : {\r\n            update_group(){\r\n                let data = {\r\n                    action : \"changegroup\",\r\n                    courseid : this.courseid,\r\n                    userid : this.userid,\r\n                    groupid : this.selectedgroup,\r\n                }\r\n                Axios({\r\n                    method:'get',\r\n                    url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                    params : data,\r\n                }).then((response) => {\r\n                    location.reload();\r\n                }).catch((e) => {\r\n                    if(confirm(\"Error al cambiar de grupo. Necesitamos actualizar para evitar errores.\")){\r\n                        location.reload()\r\n                    }else{\r\n                        location.reload()\r\n                    }\r\n                });\r\n            },\r\n\r\n            usegroupselector(){\r\n                let use = this.groups && this.groups.length > 0;\r\n                return use;\r\n            },\r\n\r\n            set_selected_group(){\r\n                if(!this.usegroupselector()) {\r\n                    return null;\r\n                }\r\n                this.groups.forEach(group => {\r\n                    if(group.selected){\r\n                        this.selectedgroup = group;\r\n                    }\r\n                })\r\n                if(!this.selectedgroup && typeof(this.groups[0]) != 'undefined'){\r\n                    this.groups[0].selected = true;\r\n                    this.selectedgroup = this.groups[0];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return pageheader;\r\n})"],"file":"pageheader.min.js"}